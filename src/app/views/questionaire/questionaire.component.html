<app-layout>
    <app-progress
        [section_num]="section_num"
        [section_cur]="section_cur"
        [section_cur_done]="section_cur_done"
        [question_count]="questions_count"
        [question_done]="questions_done"
        [total_question_count]="total_question_count"
        [section_titles]="section_titles"
        (stickyChanged)="handleSticky($event)"
        (sectionCurChanged)="handleSectionNav($event)"
        ></app-progress>
    <form [formGroup]="questionsForm">
        <h1 
            class="questionaire-title"
            [style.marginTop]="sticky ? '180px' : ''">{{questions[0].section}}</h1>
        <br/>
        <div>
            <app-question 
                [question]="question" [formGroup]="questionsForm.controls.questions.at(question.num - 1)"
                *ngFor="let question of questions; let i = index"></app-question>
        </div>
        <div class="btn-group">
            <app-button [title]="'Back'" id="btn-back" (click)="handleClickBack()" *ngIf="section_cur > 1"></app-button>
            <app-button 
                [disabled]="questions.length !== questions_done_cur"
                [title]="'Next'" 
                id="btn-next" 
                (click)="handleClickNext()" 
                *ngIf="section_cur !== 5"></app-button>
        </div>
    </form>
</app-layout>
